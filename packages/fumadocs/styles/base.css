/* AI Chat & Search Dialog styles */
@import "./ai.css";

/* Omni Command Palette — built-in search */
@import "./omni.css";

/* Shared base styles for all @farming-labs/theme themes.
 *
 * Typography CSS custom properties:
 *   --fd-font-sans   — sans-serif font family
 *   --fd-font-mono   — monospace font family
 *   --fd-h1-size, --fd-h1-weight, --fd-h1-line-height, --fd-h1-letter-spacing
 *   --fd-h2-size, --fd-h2-weight, --fd-h2-line-height, --fd-h2-letter-spacing
 *   --fd-h3-size, --fd-h3-weight, --fd-h3-line-height, --fd-h3-letter-spacing
 *   --fd-h4-size, --fd-h4-weight, --fd-h4-line-height, --fd-h4-letter-spacing
 *   --fd-body-size, --fd-body-weight, --fd-body-line-height
 *   --fd-small-size, --fd-small-weight, --fd-small-line-height
 *
 * These are set by createDocsLayout() from the typography config.
 * Themes can also set defaults directly in CSS.
 */

/* ─── Font families ──────────────────────────────────────────────────── */

body {
  font-family: var(--fd-font-sans, var(--font-geist-sans, ui-sans-serif, system-ui, sans-serif));
}

code,
kbd,
pre,
samp {
  font-family: var(
    --fd-font-mono,
    var(
      --font-geist-mono,
      ui-monospace,
      "Cascadia Code",
      "Source Code Pro",
      Menlo,
      Consolas,
      monospace
    )
  );
}

/* ─── Prose heading typography ───────────────────────────────────────── */

.prose h1,
article h1 {
  font-size: var(--fd-h1-size, 2.25rem);
  font-weight: var(--fd-h1-weight, 700);
  line-height: var(--fd-h1-line-height, 1.2);
  letter-spacing: var(--fd-h1-letter-spacing, -0.02em);
}

.prose h2,
article h2 {
  font-size: var(--fd-h2-size, 1.5rem);
  font-weight: var(--fd-h2-weight, 600);
  line-height: var(--fd-h2-line-height, 1.3);
  letter-spacing: var(--fd-h2-letter-spacing, -0.01em);
}

.prose h3,
article h3 {
  font-size: var(--fd-h3-size, 1.25rem);
  font-weight: var(--fd-h3-weight, 600);
  line-height: var(--fd-h3-line-height, 1.4);
  letter-spacing: var(--fd-h3-letter-spacing, normal);
}

.prose h4,
article h4 {
  font-size: var(--fd-h4-size, 1.125rem);
  font-weight: var(--fd-h4-weight, 600);
  line-height: var(--fd-h4-line-height, 1.4);
  letter-spacing: var(--fd-h4-letter-spacing, normal);
}

/* ─── Body text ──────────────────────────────────────────────────────── */

.prose p,
.prose li,
.prose td,
article p {
  font-size: var(--fd-body-size, 1rem);
  font-weight: var(--fd-body-weight, 400);
  line-height: var(--fd-body-line-height, 1.75);
}

/* ─── Small text (captions, metadata) ─────────────────────────────── */

.prose small,
article small,
.text-sm {
  font-size: var(--fd-small-size, 0.875rem);
  font-weight: var(--fd-small-weight, 400);
  line-height: var(--fd-small-line-height, 1.5);
}

/* ─── Callout icon alignment ────────────────────────────────────────── */

/* Callout container: center icon + text vertically */
[style*="--callout-color"] {
  align-items: start;
}

/* Left indicator bar: stretch full height regardless of align-items */
[style*="--callout-color"] > [role="none"] {
  align-self: stretch;
}

/* Icon inside callout: prevent shrinking */
[style*="--callout-color"] > svg {
  flex-shrink: 0;
  margin-top: 0;
}

/* ─── Code block base styles ─────────────────────────────────────────── */

figure.shiki pre {
  padding: 0.15rem 0.5rem;
}

figure.shiki pre > code {
  display: grid;
}

figure.shiki pre > code > [data-line] {
  padding: 0 0.25rem;
}

/* Titled code blocks: diagonal stripe background on the title bar */
figure.shiki:has(figcaption) > div:first-child {
  position: relative;
}

figure.shiki:has(figcaption) > div:first-child::before {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    -45deg,
    currentColor,
    currentColor 1px,
    transparent 1px,
    transparent 6px
  );
  opacity: 0.03;
  pointer-events: none;
}

.dark figure.shiki:has(figcaption) > div:first-child::before {
  opacity: 0.05;
}

figure.shiki:has(figcaption) figcaption {
  font-family: var(
    --fd-font-mono,
    ui-monospace,
    SFMono-Regular,
    "SF Mono",
    Menlo,
    Consolas,
    monospace
  );
  font-size: 0.75rem;
  letter-spacing: 0.01em;
}

/* ─── Page description (frontmatter) ─────────────────────────────────── */

.fd-page-description {
  margin-bottom: 1rem;
  font-size: 1.125rem;
  line-height: 1.75;
  color: var(--color-fd-muted-foreground);
}

/* ─── Breadcrumb ─────────────────────────────────────────────────────── */

.fd-breadcrumb {
  display: flex;
  align-items: center;
  gap: 0;
  font-size: 0.8rem;
  color: var(--color-fd-muted-foreground);
  margin-bottom: 0.5rem;
}

.fd-breadcrumb-item {
  display: inline-flex;
  align-items: center;
}

.fd-breadcrumb-sep {
  margin: 0 0.375rem;
  opacity: 0.4;
  font-size: 0.75rem;
}

.fd-breadcrumb-parent {
  opacity: 0.6;
  font-weight: 400;
}

.fd-breadcrumb-link {
  color: inherit;
  text-decoration: none;
  cursor: pointer;
  transition:
    opacity 0.15s,
    color 0.15s;
}

.fd-breadcrumb-link:hover {
  opacity: 1;
  color: var(--color-fd-foreground);
}

.fd-breadcrumb-current {
  font-weight: 500;
  color: var(--color-fd-foreground);
}

/* ─── Below-title block (Last Updated + Separator + Actions) ──────── */

.fd-below-title-block {
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.fd-last-updated-inline {
  color: var(--color-fd-muted-foreground);
  font-size: 0.75rem;
  font-weight: 400;
  margin: 0 0 0.75rem;
  line-height: 1.5;
}

.fd-title-separator {
  border: none;
  border-top: 1px solid var(--color-fd-border);
  margin: 0 0 0.75rem;
}

.fd-actions-portal [data-page-actions] {
  margin-top: 0;
  margin-bottom: 0;
}

/* ─── Page Actions (Copy Markdown / Open in …) ────────────────────── */

[data-page-actions] {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.75rem;
  margin-top: 0.25rem;
}

[data-actions-alignment="right"] > [data-page-actions] {
  justify-content: flex-end;
}

[data-actions-alignment="left"] > [data-page-actions] {
  justify-content: flex-start;
}

.fd-page-action-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.75rem;
  font-size: 0.8125rem;
  font-weight: 500;
  line-height: 1;
  height: 2rem;
  color: var(--color-fd-muted-foreground);
  background: var(--color-fd-secondary);
  border: 1px solid var(--color-fd-border);
  border-radius: 0.375rem;
  cursor: pointer;
  white-space: nowrap;
  transition:
    color 0.15s,
    background 0.15s,
    border-color 0.15s;
  user-select: none;
}

.fd-page-action-btn:hover {
  color: var(--color-fd-accent-foreground);
  background: var(--color-fd-accent);
}

.fd-page-action-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.fd-page-action-btn[data-copied="true"] {
  color: var(--color-fd-foreground);
}

.fd-page-action-btn svg {
  flex-shrink: 0;
  color: var(--color-fd-muted-foreground);
}

/* ─── Open dropdown ─────────────────────────────────────────────────── */

.fd-page-action-dropdown {
  position: relative;
}

.fd-page-action-menu {
  position: absolute;
  top: calc(100% + 0.375rem);
  right: 0;
  z-index: 50;
  min-width: 220px;
  padding: 0.375rem;
  background: var(--color-fd-popover);
  border: 1px solid var(--color-fd-border);
  border-radius: 0.5rem;
  box-shadow: 0 4px 24px hsl(0 0% 0% / 0.15);
  display: flex;
  flex-direction: column;
  gap: 0.125rem;
  animation: fd-page-actions-fade-in 0.12s ease-out;
}

@keyframes fd-page-actions-fade-in {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fd-page-action-menu-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.2rem 0.625rem;
  font-size: 0.8125rem;
  font-weight: 400;
  color: var(--color-fd-popover-foreground);
  background: transparent;
  border: none;
  border-radius: 0.25rem;
  cursor: pointer;
  text-align: left;
  transition:
    background 0.1s,
    color 0.1s;
}

.fd-page-action-menu-item:hover {
  background: var(--color-fd-accent);
  color: var(--color-fd-accent-foreground);
}

.fd-page-action-menu-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.25rem;
  height: 1.25rem;
  flex-shrink: 0;
}

.fd-page-action-menu-icon svg {
  width: 1rem;
  height: 1rem;
}

.fd-page-action-menu-label {
  flex: 1;
}

/* ─── Page Footer (Edit on GitHub + Last Updated) ──────────────────── */

.fd-page-footer {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75rem 1rem;
  margin-top: auto;
  padding-top: 1.5rem;
  border-top: 1px solid var(--color-fd-border, hsl(0 0% 80% / 50%));
  font-size: 0.8125rem;
}

.fd-last-updated {
  color: var(--color-fd-muted-foreground, hsl(0 0% 45%));
  font-size: 0.6875rem;
}

.fd-last-updated-footer {
  color: var(--color-fd-muted-foreground, hsl(0 0% 45%));
  font-size: 0.75rem;
  margin-left: auto;
}

@media (max-width: 640px) {
  .fd-last-updated-footer {
    margin-left: 0;
    width: 100%;
  }
}

.fd-llms-txt-links {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
}

.fd-llms-txt-link {
  color: var(--color-fd-muted-foreground, hsl(0 0% 45%));
  font-size: 0.75rem;
  font-family: var(--fd-font-mono, ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace);
  text-decoration: none;
  padding: 0.125rem 0.375rem;
  border-radius: 0.25rem;
  border: 1px solid var(--color-fd-border, hsl(0 0% 80% / 50%));
  transition: color 150ms, border-color 150ms;
}

.fd-llms-txt-link:hover {
  color: var(--color-fd-foreground, hsl(0 0% 10%));
  border-color: var(--color-fd-foreground, hsl(0 0% 10%));
  text-decoration: none;
}

/* ─── Code block copy button: show on hover ────────────────────────── */

figure.shiki > button,
figure.shiki > div:first-child button {
  opacity: 0;
  transition: opacity 0.15s;
}

figure.shiki:hover > button,
figure.shiki:hover > div:first-child button {
  opacity: 1;
}

/* ─── Sidebar AI trigger (sidebar-icon mode) ───────────────────────── */

.fd-sidebar-ai-trigger-wrapper {
  display: flex;
  gap: 8px;
  align-items: stretch;
}

.fd-sidebar-search-flex {
  flex: 1;
  min-width: 0;
}

.fd-sidebar-ai-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  min-width: 38px;
  border-radius: 8px;
  border: 1px solid var(--color-fd-border, hsl(0 0% 80% / 50%));
  background: var(--color-fd-secondary, hsl(0 0% 96%));
  color: var(--color-fd-muted-foreground, hsl(0 0% 45%));
  cursor: pointer;
  transition:
    background-color 150ms,
    color 150ms,
    border-color 150ms;
}

.fd-sidebar-ai-btn:hover {
  background: var(--color-fd-accent, hsl(0 0% 90%));
  color: var(--color-fd-primary, hsl(220 100% 50%));
  border-color: var(--color-fd-primary, hsl(220 100% 50%));
}

.fd-sidebar-ai-btn svg {
  width: 16px;
  height: 16px;
}
