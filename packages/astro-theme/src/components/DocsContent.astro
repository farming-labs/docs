---
import DocsPage from "./DocsPage.astro";

const { data, config = null } = Astro.props;

const titleSuffix = config?.metadata?.titleTemplate
  ? config.metadata.titleTemplate.replace("%s", "")
  : " â€“ Docs";

const tocEnabled = config?.theme?.ui?.layout?.toc?.enabled ?? true;
const tocStyle = config?.theme?.ui?.layout?.toc?.style ?? "default";

const breadcrumbEnabled = (() => {
  const bc = config?.breadcrumb;
  if (bc === undefined || bc === true) return true;
  if (bc === false) return false;
  if (typeof bc === "object") return bc.enabled !== false;
  return true;
})();

const showEditOnGithub = !!config?.github && !!data.editOnGithub;
const showLastModified = !!data.lastModified;
---

<head>
  <title>{data.title}{titleSuffix}</title>
  {data.description && <meta name="description" content={data.description} />}
</head>

<DocsPage
  entry={config?.entry ?? "docs"}
  tocEnabled={tocEnabled}
  tocStyle={tocStyle}
  breadcrumbEnabled={breadcrumbEnabled}
  previousPage={data.previousPage}
  nextPage={data.nextPage}
  editOnGithub={showEditOnGithub ? data.editOnGithub : null}
  lastModified={showLastModified ? data.lastModified : null}
>
  {data.description && <p class="fd-page-description">{data.description}</p>}
  <Fragment set:html={data.html} />
</DocsPage>
